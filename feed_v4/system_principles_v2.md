# üß≠ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∏ –ø—Ä–∏–Ω—Ü–∏–ø—ã —Å–∏—Å—Ç–µ–º—ã

---

## üìå –û–±—â–µ–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è:
- –ø—Ä–∏—ë–º–∞ —Ä—ã–Ω–æ—á–Ω—ã—Ö —Å–≤–µ—á–µ–π M1 —Å –±–∏—Ä–∂–∏ Binance;
- –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ M5 –∏ M15;
- —Ä–∞—Å—á—ë—Ç–∞ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞;
- —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏–∏ —Å–æ–±—ã—Ç–∏–π –ø–æ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö;
- —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤—Å–µ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –≤ PostgreSQL;
- –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ —á–µ—Ä–µ–∑ Redis.

---

## ‚öôÔ∏è –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

---

### 1. –†–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∏ –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å

- –í—Å–µ —Å–æ–±—ã—Ç–∏—è (–≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å —Å–≤–µ—á–∏, —Ä–∞—Å—á—ë—Ç –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞) –ø—É–±–ª–∏–∫—É—é—Ç—Å—è –≤ Redis Streams.
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è Redis Consumer Groups ‚Äî **–∫–∞–∂–¥—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø–æ–ª—É—á–∞–µ—Ç —Å–≤–æ—é –æ—á–µ—Ä–µ–¥—å**.
- `indicators_main.py` ‚Äî **–æ–¥–∏–Ω –∏–∑ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –º–Ω–æ–≥–∏—Ö –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–π** —Å–æ–±—ã—Ç–∏–π `ohlcv_<tf>_ready`.
  - –î—Ä—É–≥–∏–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ: —Å–∏–≥–Ω–∞–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏, –∞–ª–µ—Ä—Ç—ã, —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏, UI.

---

### 2. Redis ‚Äî runtime —à–∏–Ω–∞ –∏ –∫–µ—à

- –°–≤–µ—á–∏ (M1, M5, M15) —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ RedisTimeSeries.
- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã —Ö—Ä–∞–Ω—è—Ç—Å—è:
  - –≤ Redis Hash ‚Äî –ø–æ—Å–ª–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ;
  - –≤ PostgreSQL ‚Äî –ø–æ–ª–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è;
  - **–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ (–ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏)** –≤ RedisTimeSeries, –µ—Å–ª–∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ N –∑–Ω–∞—á–µ–Ω–∏–π.
- markPrice –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –µ–∂–µ—Å–µ–∫—É–Ω–¥–Ω–æ –≤ Redis String (`price:<symbol>`).

---

### 3. PostgreSQL ‚Äî –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∞–≤–¥—ã

- –í—Å–µ —Å–≤–µ—á–∏, –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –∏ —Å–æ–±—ã—Ç–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ PG.
- Redis –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—á–∏—â–µ–Ω, –Ω–æ –≤—Å—ë –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∏–∑ PG –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ.
- –ú–æ–¥—É–ª—å `restore_redis_from_pg.py` –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ø–æ–ª–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ.

---

### 4. –ú–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —à—É–º–∞

- –í—Å–µ –∑–∞–ø–∏—Å–∏ –≤ PG –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —á–µ—Ä–µ–∑ `ON CONFLICT DO UPDATE/DO NOTHING` ‚Äî –±–µ–∑–æ–ø–∞—Å–Ω–æ –¥–ª—è –ø–æ–≤—Ç–æ—Ä–æ–≤.
- Streams –Ω–µ—Å—É—Ç —Ç–æ–ª—å–∫–æ —Å–∏–≥–Ω–∞–ª—ã –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –≤ –∫–∞–∂–¥–æ–π –≥—Ä—É–ø–ø–µ.

---

### 5. –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∏ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏ ‚Äî –≤–Ω–µ—à–Ω–∏–µ, –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ

- –ú–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:
  - Redis Hash –∏–ª–∏ TS –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞;
  - PostgreSQL –¥–ª—è –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞;
- –ü–æ–¥–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –Ω–∞ –Ω—É–∂–Ω—ã–µ –ø–æ—Ç–æ–∫–∏ Redis —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ.

---

### 6. –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –¢–§ –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Ç–∞–π–º—Ñ—Ä–µ–π–º—ã: M1, M5, M15.
- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –ø–æ `indicator_instances_v4` + `parameters_v4`.
- –ö–∞–∂–¥—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –º–æ–∂–µ—Ç –∏–º–µ—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (`length`, `mode`, `threshold`) –∏ —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ —Ä–∞–∑–Ω—ã—Ö –¢–§.

---

## ‚úÖ –°–≤–æ–¥–∫–∞

–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å—Ç—Ä–æ–∏—Ç—Å—è –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø–∞–º:
- —Å–æ–±—ã—Ç–∏–π–Ω–æ–π —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ (Streams),
- –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏ —Ö—Ä–∞–Ω–µ–Ω–∏—è (PostgreSQL),
- —Å–∫–æ—Ä–æ—Å—Ç–∏ –∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ (Redis),
- —Ä–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç–∏ (Consumer Groups, –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ –º–æ–¥—É–ª–∏),
- –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ—Å—Ç–∏ (—Ç–æ—á–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è).

–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω–æ–º—É –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—é —Å –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å—é, –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∏ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π.

---