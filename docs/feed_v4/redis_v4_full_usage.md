# ‚ö° Redis –≤ —Å–∏—Å—Ç–µ–º–µ ‚Äî –ø–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

---

## üìå –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ Redis

Redis ‚Äî —ç—Ç–æ –≤—ã—Å–æ–∫–æ—Å–∫–æ—Ä–æ—Å—Ç–Ω–æ–π in-memory —Å–ª–æ–π, –≤—ã–ø–æ–ª–Ω—è—é—â–∏–π –≤ —Å–∏—Å—Ç–µ–º–µ —Å–ª–µ–¥—É—é—â–∏–µ —Ä–æ–ª–∏:

- üì° –ü–µ—Ä–µ–¥–∞—á–∞ —Å–æ–±—ã—Ç–∏–π –º–µ–∂–¥—É –≤–æ—Ä–∫–µ—Ä–∞–º–∏ (`Streams`)
- üíæ –û–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ OHLCV —Å–≤–µ—á–µ–π (`TimeSeries`)
- üß† –•—Ä–∞–Ω–µ–Ω–∏–µ –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ (`Hash`)
- üí≤ –•—Ä–∞–Ω–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–π —Ü–µ–Ω—ã `markPrice` (`String`)
- üîÑ –ü–æ—Ç–æ–∫–æ–≤–∞—è —Ä–µ–∞–∫—Ü–∏—è –Ω–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (`Consumer Groups`)
- ‚ö†Ô∏è –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π –∏ –∞–ª–µ—Ä—Ç–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

Redis –Ω–µ —è–≤–ª—è–µ—Ç—Å—è —Ö—Ä–∞–Ω–∏–ª–∏—â–µ–º –¥–∞–Ω–Ω—ã—Ö ‚Äî –≤—Å–µ –¥–∞–Ω–Ω—ã–µ **–¥—É–±–ª–∏—Ä—É—é—Ç—Å—è –≤ PostgreSQL**.

---

## üß± –°—Ç—Ä—É–∫—Ç—É—Ä—ã Redis –∏ –∏—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

---

### üîπ TimeSeries (–∏–ª–∏ —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç —á–µ—Ä–µ–∑ —Å–ø–∏—Å–∫–∏)

| –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –§–æ—Ä–º–∞—Ç –∫–ª—é—á–∞              | –ü—Ä–∏–º–µ—Ä –∫–ª—é—á–∞            | –ó–Ω–∞—á–µ–Ω–∏–µ             |
|------------|----------------------------|--------------------------|----------------------|
| –°–≤–µ—á–∏ M1   | `ohlcv:<symbol>:m1`        | `ohlcv:BTCUSDT:m1`       | OHLCV-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞      |
| –°–≤–µ—á–∏ M5   | `ohlcv:<symbol>:m5`        | `ohlcv:BTCUSDT:m5`       | –ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–≤–µ—á–∞|
| –°–≤–µ—á–∏ M15  | `ohlcv:<symbol>:m15`       | `ohlcv:BTCUSDT:m15`      | –ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–≤–µ—á–∞|

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤:
- `feed_and_aggregate.py` –¥–ª—è –∑–∞–ø–∏—Å–∏ –∏ —á—Ç–µ–Ω–∏—è —Å–≤–µ—á–µ–π
- `indicators_main.py` –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏—Å—Ç–æ—Ä–∏–∏

---

### üîπ Hash

| –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ        | –§–æ—Ä–º–∞—Ç –∫–ª—é—á–∞                  | –ü—Ä–∏–º–µ—Ä                      | –ó–Ω–∞—á–µ–Ω–∏–µ              |
|-------------------|-------------------------------|-----------------------------|------------------------|
| –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã        | `indicator:<symbol>:<tf>`     | `indicator:BTCUSDT:m5`      | `{"ema9": 45123.12}`   |

–°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è:
- –ø–æ—Å–ª–µ —Ä–∞—Å—á—ë—Ç–∞ –≤ `indicators_main.py`

–ß–∏—Ç–∞–µ—Ç—Å—è:
- —Å—Ç—Ä–∞—Ç–µ–≥–∏—è–º–∏ –∏ UI –∫–∞–∫ –∏—Å—Ç–æ—á–Ω–∏–∫ –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

---

### üîπ String

| –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ        | –§–æ—Ä–º–∞—Ç –∫–ª—é—á–∞         | –ü—Ä–∏–º–µ—Ä           | –ó–Ω–∞—á–µ–Ω–∏–µ          |
|-------------------|----------------------|------------------|-------------------|
| –¢–µ–∫—É—â–∞—è —Ü–µ–Ω–∞      | `price:<symbol>`     | `price:BTCUSDT`  | `45231.55`        |

–û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è:
- –≤ `feed_and_aggregate.py` –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ `markPrice`

–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ: –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è **–Ω–µ —á–∞—â–µ 1 —Ä–∞–∑–∞ –≤ —Å–µ–∫—É–Ω–¥—É**

---

## üîÅ Redis Streams –∏ Consumer Groups

### üìå –ü–æ—Ç–æ–∫–∏ —Å–æ–±—ã—Ç–∏–π (Streams)

| –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ           | –ü–æ—Ç–æ–∫                    | –ö–æ–≥–¥–∞ —Å–æ–∑–¥–∞—ë—Ç—Å—è                   |
|----------------------|--------------------------|------------------------------------|
| –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å M1        | `ohlcv_m1_ready`         | –ü–æ—Å–ª–µ –∑–∞–ø–∏—Å–∏ —Å–≤–µ—á–∏ M1             |
| –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å M5        | `ohlcv_m5_ready`         | –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ M5       |
| –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å M15       | `ohlcv_m15_ready`        | –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ M15      |
| –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã —Ä–∞—Å—Å—á–∏—Ç–∞–Ω—ã| `indicators_ready_stream`| –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä–∞—Å—á—ë—Ç–∞          |

### üìå Consumer Groups

–ö–∞–∂–¥–æ–µ —Å–æ–±—ã—Ç–∏–µ —á–∏—Ç–∞–µ—Ç—Å—è **—á–µ—Ä–µ–∑ –≥—Ä—É–ø–ø—É**:

| –ü–æ—Ç–æ–∫            | –ì—Ä—É–ø–ø–∞             | –ü–æ–ª—É—á–∞—Ç–µ–ª—å              |
|------------------|--------------------|--------------------------|
| `ohlcv_m5_ready` | `indicators_group` | `indicators_main.py`    |
| `ohlcv_m5_ready` | `signals_group`    | —Å–∏–≥–Ω–∞–ª—å–Ω—ã–π –¥–≤–∏–∂–æ–∫       |
| `ohlcv_m1_ready` | `aggregator_group` | –∞–≥—Ä–µ–≥–∞—Ç–æ—Ä (–µ—Å–ª–∏ –±—É–¥–µ—Ç –≤—ã–Ω–µ—Å–µ–Ω) |

–ö–∞–∂–¥—ã–π –≤–æ—Ä–∫–µ—Ä —á–∏—Ç–∞–µ—Ç —Å–≤–æ–∏ —Å–æ–æ–±—â–µ–Ω–∏—è —á–µ—Ä–µ–∑ `XREADGROUP`, –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç —á–µ—Ä–µ–∑ `XACK`.

---

## üîê –£—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å

- –í—Å–µ –∫–ª—é—á–∏ –∏ –ø–æ—Ç–æ–∫–∏ ‚Äî volatile;
- Redis –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫–∞–∫ **runtime**;
- –í—Å–µ –¥–∞–Ω–Ω—ã–µ (—Å–≤–µ—á–∏, –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã) —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –≤ PostgreSQL;
- –ü—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏ Redis –º–æ–∂–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–∑ –ë–î (–µ—Å–ª–∏ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è).

---

## üí° –ü—Ä–∞–∫—Ç–∏–∫–∏ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

- `markPrice` –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –Ω–µ —á–∞—â–µ 1 —Ä–∞–∑–∞ –≤ —Å–µ–∫—É–Ω–¥—É
- –í—Å–µ –¥–∞–Ω–Ω—ã–µ –≤ Redis ‚Äî —Ç–µ–∫—É—â–∏–µ / –ø–æ—Å–ª–µ–¥–Ω–∏–µ N –∑–Ω–∞—á–µ–Ω–∏–π
- TTL –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–∞ `price:<symbol>` –∏ –¥—Ä—É–≥–∏—Ö –Ω–µ–∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –∫–ª—é—á–∞—Ö
- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –∏ —Å–≤–µ—á–∏ –Ω–µ —Ö—Ä–∞–Ω—è—Ç—Å—è ‚Äú–Ω–∞–≤—Å–µ–≥–¥–∞‚Äù ‚Äî PostgreSQL —è–≤–ª—è–µ—Ç—Å—è –∞—Ä—Ö–∏–≤–æ–º

---

## ‚úÖ –í—ã–≤–æ–¥

Redis –¥–µ–ª–∞–µ—Ç —Å–∏—Å—Ç–µ–º—É:

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞    | –†–µ–∞–ª–∏–∑–∞—Ü–∏—è                    |
|-------------------|-------------------------------|
| –ë—ã—Å—Ç—Ä–æ–π           | —Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ø–∞–º—è—Ç–∏             |
| –†–µ–∞–∫—Ç–∏–≤–Ω–æ–π        | Streams + Consumer Groups     |
| –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ–π    | –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ –≤–æ—Ä–∫–µ—Ä—ã –ø–æ –≥—Ä—É–ø–ø–∞–º|
| –ë–µ–∑–æ–ø–∞—Å–Ω–æ–π        | –≤—Å—ë –¥—É–±–ª–∏—Ä—É–µ—Ç—Å—è –≤ PostgreSQL  |

Redis ‚Äî —ç—Ç–æ –≤—ã—Å–æ–∫–æ—Å–∫–æ—Ä–æ—Å—Ç–Ω–æ–π, —ç—Ñ–µ–º–µ—Ä–Ω—ã–π, –Ω–æ —É–ø—Ä–∞–≤–ª—è–µ–º—ã–π —Å–ª–æ–π –ª–æ–≥–∏–∫–∏, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–µ–¥–∏–Ω—è–µ—Ç –º–µ–∂–¥—É —Å–æ–±–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã –∏ —É—Å–∫–æ—Ä—è–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º.

---